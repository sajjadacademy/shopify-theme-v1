<div class="header-wrapper" data-sticky="{{ section.settings.enable_sticky }}">
  <header class="header container">
    
    {%- comment -%} LOGO {%- endcomment -%}
    <div class="header__logo header__logo--{{ section.settings.logo_position }}">
      <a href="{{ routes.root_url }}">
        {% if section.settings.logo != blank %}
          <img src="{{ section.settings.logo | image_url: width: 300 }}" 
               alt="{{ shop.name }}"
               width="{{ section.settings.logo_width }}"
               height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio | round }}">
        {% else %}
          <span class="h2">{{ shop.name }}</span>
        {% endif %}
      </a>
    </div>

    {%- comment -%} NAVIGATION (Desktop) {%- endcomment -%}
    <nav class="header__nav small-hide header__nav--{{ section.settings.menu_position }}">
      <ul class="header__menu list-unstyled">
        {% for link in section.settings.menu.links %}
          <li>
            <a href="{{ link.url }}">{{ link.title }}</a>
          </li>
        {% endfor %}
      </ul>
    </nav>
    
    {%- comment -%} SEARCH & ICONS {%- endcomment -%}
    <div class="header__icons">
      {% if section.settings.show_search %}
        <div class="header__search">
          {% if section.settings.search_style == 'bar' %}
            <form action="{{ routes.search_url }}" method="get" class="search-bar">
              <input type="text" name="q" placeholder="Search...">
              <button type="submit">{% render 'icon-search' %}</button>
            </form>
          {% else %}
            <a href="{{ routes.search_url }}" class="icon-btn">{% render 'icon-search' %}</a>
          {% endif %}
        </div>
      {% endif %}

      <a href="{{ routes.cart_url }}" class="icon-btn cart-icon">
        {% render 'icon-cart' %}
        <span class="cart-count bubble">{{ cart.item_count }}</span>
      </a>
      
      {% if shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="icon-btn small-hide">{% render 'icon-account' %}</a>
      {% endif %}
    </div>

  </header>
</div>

{% schema %}
{
  "name": "Header",
  "class": "section-header",
  "settings": [
    {
      "type": "header",
      "content": "Logo Settings"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Logo Width",
      "default": 120
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo Position (Desktop)",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "select",
      "id": "menu_position",
      "label": "Menu Position",
      "options": [
        { "value": "left", "label": "Beside Logo" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Functionality"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky",
      "label": "Enable Sticky Header",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show Search",
      "default": true
    },
    {
      "type": "select",
      "id": "search_style",
      "label": "Search Style",
      "options": [
        { "value": "icon", "label": "Icon only" },
        { "value": "bar", "label": "Search Bar" }
      ],
      "default": "bar"
    }
  ]
}
{% endschema %}
