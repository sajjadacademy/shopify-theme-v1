<div class="mobile-nav-wrapper">
  {% if section.settings.enable %}
  <nav class="mobile-nav">
    {%- for block in section.blocks -%}
      <a href="{{ block.settings.link }}" class="mobile-nav__item {% if request.path == block.settings.link %}active{% endif %}">
        <span class="mobile-nav__icon">
          {%- if block.settings.custom_icon != blank -%}
            {{ block.settings.custom_icon | image_url: width: 24 | image_tag }}
          {%- else -%}
            {%- render 'icon-dynamic', icon: block.settings.icon_name -%}
          {%- endif -%}
        </span>
        <span class="mobile-nav__label">{{ block.settings.label }}</span>
        {%- if block.settings.show_count and block.type == 'cart_link' -%}
          <span class="mobile-nav__count bubble">{{ cart.item_count }}</span>
        {%- endif -%}
      </a>
    {%- endfor -%}
  </nav>
  {% endif %}
</div>

{% schema %}
{
  "name": "Sticky Mobile Nav",
  "max_blocks": 5,
  "settings": [
    {
      "type": "checkbox",
      "id": "enable",
      "label": "Enable Sticky Bottom Bar",
      "default": true
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "active_color",
      "label": "Active Icon Color",
      "default": "#ff9900"
    }
  ],
  "blocks": [
    {
      "type": "nav_link",
      "name": "Menu Item",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Home"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link",
          "default": "/"
        },
        {
          "type": "text",
          "id": "icon_name",
          "label": "Icon Name (home, search, grid, user, heart)",
          "default": "home"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "Custom Icon (Upload SVG/PNG)"
        }
      ]
    },
    {
      "type": "cart_link",
      "name": "Cart Icon",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Cart"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link",
          "default": "/cart"
        },
        {
          "type": "text",
          "id": "icon_name",
          "label": "Icon Name",
          "default": "cart"
        },
         {
          "type": "checkbox",
          "id": "show_count",
          "label": "Show Cart Count",
          "default": true
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      { "type": "nav_link", "settings": { "label": "Home", "icon_name": "home", "link": "/" } },
      { "type": "nav_link", "settings": { "label": "Shop", "icon_name": "grid", "link": "/collections/all" } },
      { "type": "nav_link", "settings": { "label": "Deals", "icon_name": "tag", "link": "/collections/sale" } },
      { "type": "nav_link", "settings": { "label": "Account", "icon_name": "user", "link": "/account" } },
      { "type": "cart_link", "settings": { "label": "Cart", "icon_name": "cart" } }
    ]
  }
}
{% endschema %}
